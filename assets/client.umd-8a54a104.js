import{c as w}from"./commonjsHelpers-725317a4.js";function x(f,d){for(var u=0;u<d.length;u++){const s=d[u];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in f)){const r=Object.getOwnPropertyDescriptor(s,a);r&&Object.defineProperty(f,a,r.get?r:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}))}var p={},v={get exports(){return p},set exports(f){p=f}};(function(f,d){(function(u,s){f.exports=s()})(w,function(){var u=["onMenuShareTimeline","onMenuShareAppMessage"],s=["wx-open-subscribe","wx-open-audio"];return function(){function a(t){if(this instanceof a){this.sdkUrl="//res.wx.qq.com/open/js/jweixin-1.4.0.js",this.config=t||{},this.config.customUrl&&(this.sdkUrl=this.config.customUrl);var i=this.config.jsApiList,e=this.config.openTagList;if(!i||i.length<=0)this.config.jsApiList=u;else for(var n=0,c=u.length;n<c;n++){var o=u[n];i.indexOf(o)<0&&i.push(o)}if(!e||e.length<=0)this.config.openTagList=s;else for(var l=0,h=s.length;l<h;l++){var g=s[l];e.indexOf(g)<0&&e.push(g)}return this.debug=!!this.config.debug,this}return new a(t)}var r=a.prototype;return r.initialize=function(){return this.loadScript()},r.signSignature=function(t){var i=this,e=this.config,n=t||e,c={debug:this.debug,appId:e.appId,timestamp:n.timestamp||e.timestamp,nonceStr:n.nonceStr||e.nonceStr,signature:n.signature||e.signature,jsApiList:e.jsApiList.slice(0,e.jsApiList.length),openTagList:e.openTagList.slice(0,e.openTagList.length)},o=this.debug;return new Promise(function(l,h){if(!window.wx)return h(new Error("wx js not defined"));var g=window.wx;i.setOriginWx(),g.config(c),g.ready(function(){console.log("sign signature finished..."),i.setOriginWx(),l(i)}),g.error(function(m){o&&alert("sign error: "+JSON.stringify(m)),i.setOriginWx(),h(m)})})},r.loadScript=function(){var t=this;return new Promise(function(i,e){var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.onload=function(){console.log("Wechat script loaded successfully!"),t.signSignature().then(function(o){i(o)}).catch(function(o){e(o)})},n.onerror=function(o){console.error("Failed to load wechat script!"),console.error(o),t.debug&&alert("Cannot load wechat script!"),e(o)};var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(n,c),n.src=t.sdkUrl})},r.shareOnMoment=function(t){return t?this.callWechatApi("onMenuShareTimeline",t):this},r.shareOnChat=function(t){return t?this.callWechatApi("onMenuShareAppMessage",t):this},r.callWechatApi=function(t,i,e){if(!t)return this;var n=this.debug;if(this.config.jsApiList.indexOf(t)<0)return n&&alert("the wechat api ["+t+`] you call was not registered, 
pls add the api into your [jsApiList] config`),this;var c=this.getOriginalWx()[t];return c&&typeof c=="function"?(c(i,e),this):(n&&alert("no such api ["+t+"] found!"),this)},r.getOriginalWx=function(){return this.wx||window.wx},r.setOriginWx=function(){return this.wx||(this.wx=window.wx),this},a}()})})(v);const j=p,O=x({__proto__:null,default:j},[p]);export{O as c};
